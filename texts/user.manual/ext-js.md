
ENTITLE='Creating a JavaScript extension'
RUTITLE='Создание расширения на языке JavaScript'
TARGET=doc/user/manual/ext-js/index.php

luwrain-page-en

# Creating a~JavaScript extension

luwrain-page-ru

# Создание расширения на~языке JavaScript

Luwrain поддерживает три типа расширения- откомпилированное расширение на языке Java, которое подключается в виде откомпилированных jar-файлов, расширение на Java Script и текстовое расширение, которое подключается как текстовый файл.
Расширение на Java Script
Возможность исполнения JS включена в ядро системы Luwrain, начиная с версии 1.1.0. Это один из самых простых способов дополнить или расширить функциональность стандартной поставки.
Текстовое расширение и расширение на JS являются динамическими. Откомпилированные расширения загружаются один раз при старте системы и выгружены быть не могут. 
Расширения JS в ходе работы системы могут динамически подгружаться и выгружаться. Например, так происходит при использовании приложения Студия, когда запускается программа, написанная в ней. При запуски программы, приложение сначала подключает написанную программу как расширение, а после закрытия приложения это расширения автоматически выгружается. 
Что можно сделать при помощи расширения JS
При помощи расширения JS можно создавать новые экспортируемые объекты Luwrain. Экспортируемые объекты Luwrain- это некоторые общие названия целого класса объектов, которые предоставляют расширение. К ним относятся команды (запускаются из командной строки при нажатии Alt+X). При помощи расширения JS можно создать свою собственную команду, которая будет добавляться в систему. Можно написать своё собственное приложение. Можно подготовить некоторую функцию для обработки текста.
Как сделать своё расширение
Когда Luwrain запускается, он проверяет несколько каталогов. Прежде всего,  проверяется каталог Data в своём дистрибутиве. Этот каталог находится рядом с запускаемым файлом Luwrain. В каталоге Data проверяется наличие каталога js. После этого, Luwrain проверяет пользовательский профиль, а в нём проверяет каталог extensions, заглядывает во все прямые каталоги каталога extensions, и, в каждом из них проверяет каталог js. 
Пользовательский профиль-это некоторый набор конфигурационных файлов, которые Luwrain создает для каждого из своих пользователей. В Linux-это каталог ~/.Luwrain. В Windows – это каталог C: users/HP/AppData/Roaming/Luwrain. В каждом из этих подкаталогов Luwrain проверяет все файлы, которые имеют расширение .js. Каждый из этих файлов Luwrain пытается загрузить как отдельное расширение. Если попытка загрузки js-файла проходит успешно, то Luwrain добавляет в своё ядро те экспортируемые объекты, которые экспортирует конкретное расширение.
Что написать в файл .js
Внутри любого контекста исполнения Java Script в Luwrain всегда доступен объект «Luwrain». У этого объекта есть несколько доступных функций, которые можно вызывать….
Основной текст файла расширения Luwrain выполняет только один раз при старте системы. Если то или иное расширение не вызывает никаких команд для регистрации экспортируемых объектов, никаких следов исполнения этого расширения при старте системы в Luwrain не останется. 
