
ENTITLE='Extensions essentials'
RUTITLE='Основные понятия расширений'
TARGET=doc/ext/essentials/index.php

luwrain-page-en

# Extensions essentials

luwrain-page-ru

# Основные понятия расширений

На~этой странице перечислены основные понятия, которые необходимо знать для~разработки расширений,
а~также для~построения интерфейса приложения для~нашего окружения.
Они все представлены классами или интерфейсами,
входящими в~LUWRAIN~API на~языке Java.
Для~вашего удобства мы снабдили описания ссылками на~соответствующие страницы [документации javadoc  для~LUWRAIN~API](/api/).

Интерфейс [org.luwrain.core.extensions.Extension](/api/org/luwrain/core/extensions/Extension.html) требует 
наличие реализации методов, которые создают объекты следующих типов:

* команда  (command);
* ярлык (shortcut);
* фабрика секций панели управления;
* универсальная ссылка  (uniref);
* фоновый процесс (worker).

Помимо этого, этот интерфейс позволяет расширять функциональность компонентов, отвечающих за поддержку национальных языков и стандартов.
Ниже мы рассмотрим назначение команд, ярлыков, универсальных ссылок и фоновых процессов.
Остальные возможности создания расширений описаны в~других соответствующих главах [документации](local:/doc/ext/).

## Команда (command)

См.~также

* [Страница org.luwrain.core.Command в~LUWRAIN~API](/api/org/luwrain/core/Command)

Команда определяет некоторое действие в~пользовательском пространстве. 
Некоторое множество команд являются системными и  позволяют вызывать различные функции ядра системы.
Понятие команды отвечает следующим требованиям:

1. Каждая команда в~системе имеет регистрочувствительное строковое имя.
2. Команда всегда контекстно независима.
это означает, что результат её выполнения всегда должен быть одним и тем~же, вне~зависимости 
от~того, какие приложения запущены у~пользователя.
3. Команда не может иметь аргументы.
4. Команда не~возвращает никакой информации об~успешности своего выполнения.
5. Команде может быть назначена некоторая комбинация горячих клавиш.

## Ярлык (shortcut)

См.~также

* [Страница org.luwrain.core.Shortcut в~LUWRAIN~API](/api/org/luwrain/core/Shortcut)

Ярлык является фабрикой для объекта-приложения (см.~ниже).
Как и с~командой, с~каждым ярлыком, зарегистрированном в~системе, связано некоторое строковое имя.
Получив в~качестве входных параметров массив строковых аргументов, 
ярлык должен создать и вернуть некоторое множество объектов, удовлетворяющих интерфейсу [org.luwrain.core.Application](/api/org/luwrain/core/Application.html).
Ядро системы предпримет попытку запустить все эти~приложения.
Считается допустимым, если ярлык выполняет некоторые действия, но не предоставляет никаких объектов-приложений.
В~частности, например, таким образом реализована функция запустить воспроизведения файла в~фоновом режиме.
Обратиться к~ярлыку и произвести запуск приложений можно при~помощи метода *launchApp()*  [класса Luwrain](local:/doc/ext/luwrain/).

## Объекты приложений

### Экземпляр приложения (application)

См.~также

* [Страница org.luwrain.core.Application в~LUWRAIN~API](/api/org/luwrain/core/Application.html)

Это самое главное понятие, которое охватывает всё, 
что относится к~некоторому конкретному экземпляру приложения.
экземпляр приложения должен удовлетворять интерфейсу {{org.luwrain.core.Application}}.
Допускается одновременный запуск множественных экземпляров одного и того~же приложения.
Каждый экземпляр имеет имя, которое некоторым образом идентифицирует его для~пользователя.
Никаких ограничений на~имя не~накладывается:
оно может никак не~описывать, экземпляр какого приложения оно обозначает,
и допускается присутствие в~системе нескольких экземпляров с~одинаковым именем 
(что, очевидно, порождает неудобство для~пользователя и не~рекомендуется).

Экземпляр приложения должен выполнять две~основные операции:

* произвести инициализацию (путём вызова средой метода {{onLaunch()}});
*  предоставить набор областей с~информацией об~их расположении (см.~ниже).
Во~время инициализации экземпляру передаётся объект {{LUWRAIN}},
который используется для~идентификации и   организации взаимодействия с~основной средой.
Его~назначение подробно описано на~[local:/doc/new-app/luwrain/  этой~странице].

### Область  (area)

См.~также

* [страница org.luwrain.core.Area в~LUWRAIN~API](/api/org/luwrain/core/Area.html)

область --- основной элемент построения доступного интерфейса в~традициях LUWRAIN.
Каждая область должна удовлетворять интерфейсу {{org.luwrain.core.Area}}.
Области представляют собой некоторый рабочий объект, с~которым взаимодействует пользователь.
Они могут являться как~некоторым одним элементом управления 
(список,
редактирование~текста,
таблица,
дерево 
и~т.~д.),
так и сборным (например, формой с~несколькими элементами управления).

Область имеет следующие ключевые особенности:

* предоставляет некоторое текстовое представление своего содержимого,
которое выводится на~экран для~дополнения речевого вывода,
облегчающего работу слабовидящим пользователям;
* имеет так~называемую "горячую точку" ({{Hot point}}),
т.~е. координаты отметки,
ассоциированной с~текущим положением в~текстовом представлении
(для~простоты можно считать это обобщением понятия курсора);
* выступает получателем событий для~различных оповещений среды;
* имеет имя.

Обратите внимание, что области не~имеют единого механизма предоставления речевого описания их~содержимого.
Речевой вывод синтезируется отдельно в~рамках обработки событий среды,
которые включают в~себя в~том числе и команды пользователя.

Текстовое описание предоставляется массивом строк,
который {не~может иметь нулевую длину}
(пустое описание --- массив с~одной пустой строкой).
Развёрнутое описание событий среды доступно на~[local:/doc/new-app/events/ этой~странице].

### Всплывающая область  (popup)

См.~также

* [Страница org.luwrain.core.Popup в~LUWRAIN~API](/api/org/luwrain/core/Popup.html)

Всплывающая область отличается от~обычной тем, что она может использоваться для~организации диалога с~пользователем.
Каждая всплывающая область должна удовлетворять интерфейсу {{org.luwrain.core.Popup}}.
Всплывающие области приложений отображаются вдоль нижнего края экрана.
При~их~показе ядро запускает новый вложенный цикл обработки событий,
потому что внешний цикл может быть остановлен незавершённым обработчиком,
ожидающим завершения диалога с~пользователем.
Более подробно про~всплывающие области можно прочитать [local:/doc/new-app/popups/ здесь].

## Читать далее

* [Класс LUWRAIN](local:/doc/ext/luwrain/)
