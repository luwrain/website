
ENTITLE='Creating a JavaScript extension'
RUTITLE='Создание расширения на JavaScript'
TARGET=doc/js/ext/index.php

luwrain-page-en

# Creating a~JavaScript extension

luwrain-page-ru

# Создание расширения на~языке JavaScript

Возможность исполнения скриптов на~языке JavaScript включена в ядро LUWRAIN, начиная с версии 1.1.0.
Создание подобных расширений является одним из самых простых способов дополнить функциональность стандартной поставки.

Как~описано в~[соответствующем разделе](local:/doc/user/manual/ext/),
LUWRAIN поддерживает три типа расширений:

* откомпилированные расширения на языке Java, которые подключаются в виде откомпилированных jar-файлов;
* расширения на Java Script;
* текстовые расширения.

Текстовые расширения и расширения на JavaScript являются динамическими, 
в~то~время как откомпилированные расширения загружаются один раз при старте системы и выгружены быть не могут.
Динамические расширения в ходе работы системы могут динамически загружаться и выгружаться.
Например, так происходит при использовании приложения Студия,
когда запускается программа, написанная в~нём.
При запуски Студия сначала загружает написанную программу как расширение,
а после закрытия это расширение автоматически выгружается.

## Что можно сделать при~помощи расширения JavaScript

При помощи расширения JS можно создавать новые так называемые экспортируемые объекты Luwrain.
Экспортируемые объекты Luwrain- это некоторые общие названия целого класса объектов, которые предоставляют расширение.
К ним относятся:

* команды (запускаются из командной строки при нажатии Alt+X).
* приложения;
* функции обработки текста и~т.~д.

При помощи расширения JS можно создать свою собственную команду, которая будет добавляться в систему и выполнять некоторое указанное действие.

№№ Как сделать своё расширение

Когда Luwrain запускается
, он проверяет несколько каталогов.
Прежде всего,  проверяется каталог __data__ в своём дистрибутиве.
Этот каталог находится рядом с~главным запускаемым файлом LUWRAIN.
В каталоге __data__ проверяется наличие каталога __js__.
После этого, Luwrain проверяет пользовательский профиль, а в нём проверяет каталог extensions, заглядывает во все прямые каталоги каталога extensions, и, в каждом из них проверяет каталог js.

Пользовательский профиль-это некоторый набор конфигурационных файлов, которые Luwrain создает для каждого из своих пользователей. В Linux-это каталог ~/.Luwrain. В Windows – это каталог C: users/HP/AppData/Roaming/Luwrain. В каждом из этих подкаталогов Luwrain проверяет все файлы, которые имеют расширение .js. Каждый из этих файлов Luwrain пытается загрузить как отдельное расширение. Если попытка загрузки js-файла проходит успешно, то Luwrain добавляет в своё ядро те экспортируемые объекты, которые экспортирует конкретное расширение.

Что написать в файл .js

Внутри любого контекста исполнения Java Script в Luwrain всегда доступен объект «Luwrain». У этого объекта есть несколько доступных функций, которые можно вызывать….

Основной текст файла расширения Luwrain выполняет только один раз при старте системы. Если то или иное расширение не вызывает никаких команд для регистрации экспортируемых объектов, никаких следов исполнения этого расширения при старте системы в Luwrain не останется.

